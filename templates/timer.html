{% extends 'base.html' %}
{% load static %}
{% block title %}Олимпиада Штерн - Таймер{% endblock %}
{% block content %}
    <img class="desktop-nav-arrow" src="{% static 'images/desktop-nav-arrow.png' %}" alt="">
    <div class="desktop-nav">
        <div class="nav-logo">
            <a href="">
                <img src="{% static 'images/shtern-logo.svg' %}" alt="">
                <img src="{% static 'images/shtern-logo-full.svg' %}" alt="">
            </a>
        </div>
        <ul class="desktop-nav-list">
            <li class="desktop-nav-item">
                <a href="/">
                    <img src="{% static 'images/logo-icon.svg' %}" alt="">
                    Главная
                </a>
            </li>
            <li class="desktop-nav-item desktop-nav-item_active">
                <a href="">
                    <img src="{% static 'images/olymp-icon.svg' %}" alt="">
                    Олимпиада
                </a>
            </li>
            <li class="desktop-nav-item">
                <a href="/profile">
                    <img src="{% static 'images/profile-icon.svg' %}" alt="">
                    Профиль
                </a>
            </li>
            <li class="desktop-nav-item">
                <a href="/documents">
                    <img src="{% static 'images/document-icon.svg' %}" alt="">
                    Документы
                </a>
            </li>
        </ul>
        <div class="desktop-nav-social">
            <div class="site-link">
                <a href="https://www.schoolofsciences.ru">
                    www.schoolofsciences.ru
                </a>
            </div>
            <ul class="desktop-nav-social_list">
                <li>
                    <a href="https://vk.com/schoolofsciences/">
                        <img src="{% static 'images/social-icon-vk.svg' %}" alt="">
                    </a>
                </li>
                <li>
                    <a href="https://instagram.com/schoolofsciences/">
                        <img src="{% static 'images/social-icon-instagram.svg' %}" alt="">
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <div class="dialog-layer timer-dialog-layer">
        <div class="content">
            <div class="box">
                <div class="text">
                    <div class="heading">
                        до начала
                    </div>
                    <div class="timer" id="timer">
                        <script>
                            setTimeout(function (){
                                $('#preloader').remove()
                            },4000)
                            function timer() {
                                let deadline = JSON.parse('{{ time_to_start|safe }}');
                                    function getTimeRemaining(endtime) {
                                        let t = Date.parse(endtime) - Date.parse(new Date())
                                        let seconds = Math.floor((t / 1000) % 60)
                                        let minutes = Math.floor((t / 1000 / 60) % 60)
                                        let hours = Math.floor((t / (1000 * 60 * 60)) % 24);
                                        let days = Math.floor(t / (1000 * 60 * 60 * 24));
                                        return {
                                            'total': t,
                                            'days': days,
                                            'hours': hours,
                                            'minutes': minutes,
                                            'seconds': seconds
                                        };
                                    }
                                
                                function initializeClock(id, endtime) {
                                    let timer = document.getElementById(id);
                                    function updateClock() {
                                        let t = getTimeRemaining(endtime);
                                        timer.innerHTML =timer.innerHTML = `${t.days}дн. ${t.hours}ч. ${t.minutes}мин.`
                                        if (t.total <= 0) {
                                            clearInterval(timeinterval);
                                        }
                                    }
                                    updateClock();
                                    let timeInterval = setInterval(updateClock,1000)
                                }
                                initializeClock('timer', deadline);
                            }
                            timer()
                        </script>
                    </div>
                    <div class="stripes">
                        <hr>
                        <hr>
                    </div>
                    <div class="description">
                        <div class="plus">
                            <img src="{% static 'images/plus.svg' %}" alt="">
                        </div>
                        <p>
                            Перед стартом олимпиады Вам придет уведомление на почту. Можете не переживать :)
                        </p>
                    </div>
                </div>
                <img src="{% static 'images/dialog-box.svg' %}" alt="">
            </div>
        </div>
    </div>

    <div class="bg-layer">
        <div class="content">
            <img class="bg-timer-layer-item" id="bg-timer-layer-item-1" src="{% static 'images/bg-layer-1.svg' %}" alt="">
            <img class="bg-timer-layer-item" id="bg-timer-layer-item-2" src="{% static 'images/bg-layer-2.svg' %}" alt="">
            <img class="bg-timer-layer-item" id="bg-timer-layer-item-3" src="{% static 'images/bg-layer-3.svg' %}" alt="">
            <img class="bg-timer-layer-item" id="bg-timer-layer-item-4" src="{% static 'images/bg-layer-4.svg' %}" alt="">
            <img class="bg-timer-layer-item" id="bg-timer-layer-item-5" src="{% static 'images/bg-layer-5.svg' %}" alt="">
            <img class="bg-timer-layer-item" id="bg-timer-layer-item-6" src="{% static 'images/bg-layer-3.svg' %}" alt="">
        </div>
    </div>
    <div class="template-wrap timer-wrap">
        <div class="content-layer">
            <div class="site-visit">
                <div class="social-links">
                <ul class="social-list">
                    <li class="social-item">
                        <a class="social-link" href="https://vk.com/schoolofsciences/">
                            <img class="social-image vk" src="{% static 'images/social-icon-vk.svg' %}" alt="">
                        </a>
                    </li>
                    <li class="social-item">
                        <a class="social-link" href="https://instagram.com/schoolofsciences/">
                            <img class="social-image instagram" src="{% static 'images/social-icon-instagram.svg' %}" alt="">
                        </a>
                    </li>
                </ul>
            </div>
                <p>Посетите наш сайт :)</p>
                <p><a class="site-visit-link" href="https://schoolofsciences.ru/">www.schoolofsciences.ru</a></p>

        </div>

        </div>
    </div>

    <footer class="footer " id="footer">
        <div class="footer-images">
            <img class="penguin" src="{% static 'images/penguin-1.svg' %}" alt="">
            <img class="stripes" src="{% static 'images/bg-layer-7.svg' %}" alt="">
        </div>
        {% include "footer-div.html" %}
    </footer>
    {% include "mobile-nav.html" %}
{% endblock content %}